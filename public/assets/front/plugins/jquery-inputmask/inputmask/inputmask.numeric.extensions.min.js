!function(e){"function"==typeof define&&define.amd?define(["jquery","inputmask"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("./inputmask")):e(jQuery,window.Inputmask)}(function(e,i){return i.extendAliases({numeric:{mask:function(e){function i(i){for(var r="",n=0;n<i.length;n++)r+=e.definitions[i.charAt(n)]?"\\"+i.charAt(n):i.charAt(n);return r}if(0!==e.repeat&&isNaN(e.integerDigits)&&(e.integerDigits=e.repeat),e.repeat=0,e.groupSeparator===e.radixPoint&&("."===e.radixPoint?e.groupSeparator=",":","===e.radixPoint?e.groupSeparator=".":e.groupSeparator="")," "===e.groupSeparator&&(e.skipOptionalPartCharacter=void 0),e.autoGroup=e.autoGroup&&""!==e.groupSeparator,e.autoGroup&&("string"==typeof e.groupSize&&isFinite(e.groupSize)&&(e.groupSize=parseInt(e.groupSize)),isFinite(e.integerDigits))){var r=Math.floor(e.integerDigits/e.groupSize),n=e.integerDigits%e.groupSize;e.integerDigits=parseInt(e.integerDigits)+(0===n?r-1:r),e.integerDigits<1&&(e.integerDigits="*")}e.placeholder.length>1&&(e.placeholder=e.placeholder.charAt(0)),e.radixFocus=e.radixFocus&&""!==e.placeholder&&!0===e.integerOptional,e.definitions[";"]=e.definitions["~"],e.definitions[";"].definitionSymbol="~",!0===e.numericInput&&(e.radixFocus=!1,e.digitsOptional=!1,isNaN(e.digits)&&(e.digits=2),e.decimalProtect=!1);var t=i(e.prefix);return t+="[+]",t+=!0===e.integerOptional?"~{1,"+e.integerDigits+"}":"~{"+e.integerDigits+"}",void 0!==e.digits&&(isNaN(e.digits)||parseInt(e.digits)>0)&&(t+=e.digitsOptional?"["+(e.decimalProtect?":":e.radixPoint)+";{1,"+e.digits+"}]":(e.decimalProtect?":":e.radixPoint)+";{"+e.digits+"}"),""!==e.negationSymbol.back&&(t+="[-]"),t+=i(e.suffix),e.greedy=!1,t},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,radixPoint:".",radixFocus:!0,groupSize:3,groupSeparator:"",autoGroup:!1,allowPlus:!0,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",integerOptional:!0,prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:null,max:null,step:1,insertMode:!0,autoUnmask:!1,unmaskAsNumber:!1,postFormat:function(r,n,t,a){!0===a.numericInput&&(r=r.reverse(),isFinite(n)&&(n=r.join("").length-n-1));var o,l,s=!1;r.length>=a.suffix.length&&r.join("").indexOf(a.suffix)===r.length-a.suffix.length&&(r.length=r.length-a.suffix.length,s=!0);var p=!1,f=r[n=n>=r.length?r.length-1:n<a.prefix.length?a.prefix.length:n];if(""===a.groupSeparator||!0!==a.numericInput&&-1!==e.inArray(a.radixPoint,r)&&n>e.inArray(a.radixPoint,r)||new RegExp("["+i.escapeRegex(a.negationSymbol.front)+"+]").test(f)){if(s)for(o=0,l=a.suffix.length;l>o;o++)r.push(a.suffix.charAt(o));return{pos:n}}var g=r.slice();f===a.groupSeparator&&(g.splice(n--,1),f=g[n]),t?f!==a.radixPoint&&(g[n]="?"):g.splice(n,0,"?");var u=g.join(""),d=u;if(u.length>0&&a.autoGroup||t&&-1!==u.indexOf(a.groupSeparator)){var c=i.escapeRegex(a.groupSeparator);p=0===u.indexOf(a.groupSeparator);var x=(u=u.replace(new RegExp(c,"g"),"")).split(a.radixPoint);if((u=""===a.radixPoint?u:x[0])!==a.prefix+"?0"&&u.length>=a.groupSize+a.prefix.length)for(var m=new RegExp("([-+]?[\\d?]+)([\\d?]{"+a.groupSize+"})");m.test(u);)u=u.replace(m,"$1"+a.groupSeparator+"$2"),u=u.replace(a.groupSeparator+a.groupSeparator,a.groupSeparator);""!==a.radixPoint&&x.length>1&&(u+=a.radixPoint+x[1])}for(p=d!==u,r.length=u.length,o=0,l=u.length;l>o;o++)r[o]=u.charAt(o);var h=e.inArray("?",r);if(-1===h&&f===a.radixPoint&&(h=e.inArray(a.radixPoint,r)),t?r[h]=f:r.splice(h,1),!p&&s)for(o=0,l=a.suffix.length;l>o;o++)r.push(a.suffix.charAt(o));return h=a.numericInput&&isFinite(n)?r.join("").length-h-1:h,a.numericInput&&(r=r.reverse(),e.inArray(a.radixPoint,r)<h&&r.join("").length-a.suffix.length!==h&&(h-=1)),{pos:h,refreshFromBuffer:p,buffer:r}},onBeforeWrite:function(r,n,t,a){if(r&&("blur"===r.type||"checkval"===r.type)){var o=n.join(""),l=o.replace(a.prefix,"");if(l=l.replace(a.suffix,""),l=l.replace(new RegExp(i.escapeRegex(a.groupSeparator),"g"),""),","===a.radixPoint&&(l=l.replace(i.escapeRegex(a.radixPoint),".")),isFinite(l)&&isFinite(a.min)&&parseFloat(l)<parseFloat(a.min))return e.extend(!0,{refreshFromBuffer:!0,buffer:(a.prefix+a.min).split("")},a.postFormat((a.prefix+a.min).split(""),0,!0,a));if(!0!==a.numericInput){var s=""!==a.radixPoint?n.join("").split(a.radixPoint):[n.join("")],p=s[0].match(a.regex.integerPart(a)),f=2===s.length?s[1].match(a.regex.integerNPart(a)):void 0;if(p){p[0]!==a.negationSymbol.front+"0"&&p[0]!==a.negationSymbol.front&&"+"!==p[0]||void 0!==f&&!f[0].match(/^0+$/)||n.splice(p.index,1);var g=e.inArray(a.radixPoint,n);if(-1!==g){if(isFinite(a.digits)&&!a.digitsOptional){for(var u=1;u<=a.digits;u++)(void 0===n[g+u]||n[g+u]===a.placeholder.charAt(0))&&(n[g+u]="0");return{refreshFromBuffer:o!==n.join(""),buffer:n}}if(g===n.length-a.suffix.length-1)return n.splice(g,1),{refreshFromBuffer:!0,buffer:n}}}}}if(a.autoGroup){var d=a.postFormat(n,a.numericInput?t:t-1,!0,a);return d.caret=t<=a.prefix.length?d.pos:d.pos+1,d}},regex:{integerPart:function(e){return new RegExp("["+i.escapeRegex(e.negationSymbol.front)+"+]?\\d+")},integerNPart:function(e){return new RegExp("[\\d"+i.escapeRegex(e.groupSeparator)+"]+")}},signHandler:function(e,i,r,n,t){if(!n&&t.allowMinus&&"-"===e||t.allowPlus&&"+"===e){var a=i.buffer.join("").match(t.regex.integerPart(t));if(a&&a[0].length>0)return i.buffer[a.index]===("-"===e?"+":t.negationSymbol.front)?"-"===e?""!==t.negationSymbol.back?{pos:a.index,c:t.negationSymbol.front,remove:a.index,caret:r,insert:{pos:i.buffer.length-t.suffix.length-1,c:t.negationSymbol.back}}:{pos:a.index,c:t.negationSymbol.front,remove:a.index,caret:r}:""!==t.negationSymbol.back?{pos:a.index,c:"+",remove:[a.index,i.buffer.length-t.suffix.length-1],caret:r}:{pos:a.index,c:"+",remove:a.index,caret:r}:i.buffer[a.index]===("-"===e?t.negationSymbol.front:"+")?"-"===e&&""!==t.negationSymbol.back?{remove:[a.index,i.buffer.length-t.suffix.length-1],caret:r-1}:{remove:a.index,caret:r-1}:"-"===e?""!==t.negationSymbol.back?{pos:a.index,c:t.negationSymbol.front,caret:r+1,insert:{pos:i.buffer.length-t.suffix.length,c:t.negationSymbol.back}}:{pos:a.index,c:t.negationSymbol.front,caret:r+1}:{pos:a.index,c:e,caret:r+1}}return!1},radixHandler:function(i,r,n,t,a){if(!t&&(-1!==e.inArray(i,[",","."])&&(i=a.radixPoint),i===a.radixPoint&&void 0!==a.digits&&(isNaN(a.digits)||parseInt(a.digits)>0))){var o=e.inArray(a.radixPoint,r.buffer),l=r.buffer.join("").match(a.regex.integerPart(a));if(-1!==o&&r.validPositions[o])return r.validPositions[o-1]?{caret:o+1}:{pos:l.index,c:l[0],caret:o+1};if(!l||"0"===l[0]&&l.index+1!==n)return r.buffer[l?l.index:n]="0",{pos:(l?l.index:n)+1,c:a.radixPoint}}return!1},leadingZeroHandler:function(i,r,n,t,a){if(!0===a.numericInput){if("0"===r.buffer[r.buffer.length-a.prefix.length-1])return{pos:n,remove:r.buffer.length-a.prefix.length-1}}else{var o=r.buffer.join("").match(a.regex.integerNPart(a)),l=e.inArray(a.radixPoint,r.buffer);if(o&&!t&&(-1===l||l>=n))if(0===o[0].indexOf("0")){n<a.prefix.length&&(n=o.index);var s=e.inArray(a.radixPoint,r._buffer),p=r._buffer&&r.buffer.slice(l).join("")===r._buffer.slice(s).join("")||0===parseInt(r.buffer.slice(l+1).join("")),f=r._buffer&&r.buffer.slice(o.index,l).join("")===r._buffer.slice(a.prefix.length,s).join("")||"0"===r.buffer.slice(o.index,l).join("");if(-1===l||p&&f)return r.buffer.splice(o.index,1),n=n>o.index?n-1:o.index,{pos:n,remove:o.index};if(o.index+1===n||"0"===i)return r.buffer.splice(o.index,1),n=o.index,{pos:n,remove:o.index}}else if("0"===i&&n<=o.index&&o[0]!==a.groupSeparator)return!1}return!0},postValidation:function(r,n){var t=!0,a=r.join("").replace(n.prefix,"");return a=a.replace(n.suffix,""),a=a.replace(new RegExp(i.escapeRegex(n.groupSeparator),"g"),""),","===n.radixPoint&&(a=a.replace(i.escapeRegex(n.radixPoint),".")),a=a.replace(new RegExp("^"+i.escapeRegex(n.negationSymbol.front)),"-"),a=a.replace(new RegExp(i.escapeRegex(n.negationSymbol.back)+"$"),""),a=a===n.negationSymbol.front?a+"0":a,isFinite(a)&&(null!==n.max&&isFinite(n.max)&&(t=parseFloat(a)<=parseFloat(n.max)),t&&null!==n.min&&isFinite(n.min)&&(0>=a||a.toString().length>=n.min.toString().length)&&((t=parseFloat(a)>=parseFloat(n.min))||(t=e.extend(!0,{refreshFromBuffer:!0,buffer:(n.prefix+n.min).split("")},n.postFormat((n.prefix+n.min).split(""),0,!0,n)),t.refreshFromBuffer=!0))),t},definitions:{"~":{validator:function(r,n,t,a,o){var l=o.signHandler(r,n,t,a,o);if(!l&&!(l=o.radixHandler(r,n,t,a,o))&&!0===(l=a?new RegExp("[0-9"+i.escapeRegex(o.groupSeparator)+"]").test(r):new RegExp("[0-9]").test(r))&&!0===(l=o.leadingZeroHandler(r,n,t,a,o))){var s=e.inArray(o.radixPoint,n.buffer);l=-1!==s&&!1===o.digitsOptional&&!0!==o.numericInput&&t>s&&!a?{pos:t,remove:t}:{pos:t}}return l},cardinality:1,prevalidator:null},"+":{validator:function(e,i,r,n,t){var a=t.signHandler(e,i,r,n,t);return!a&&(n&&t.allowMinus&&e===t.negationSymbol.front||t.allowMinus&&"-"===e||t.allowPlus&&"+"===e)&&(a="-"!==e||(""!==t.negationSymbol.back?{pos:r,c:"-"===e?t.negationSymbol.front:"+",caret:r+1,insert:{pos:i.buffer.length,c:t.negationSymbol.back}}:{pos:r,c:"-"===e?t.negationSymbol.front:"+",caret:r+1})),a},cardinality:1,prevalidator:null,placeholder:""},"-":{validator:function(e,i,r,n,t){var a=t.signHandler(e,i,r,n,t);return!a&&n&&t.allowMinus&&e===t.negationSymbol.back&&(a=!0),a},cardinality:1,prevalidator:null,placeholder:""},":":{validator:function(e,r,n,t,a){var o=a.signHandler(e,r,n,t,a);if(!o){var l="["+i.escapeRegex(a.radixPoint)+",\\.]";(o=new RegExp(l).test(e))&&r.validPositions[n]&&r.validPositions[n].match.placeholder===a.radixPoint&&(o={caret:n+1})}return o?{c:a.radixPoint}:o},cardinality:1,prevalidator:null,placeholder:function(e){return e.radixPoint}}},onUnMask:function(e,r,n){var t=e.replace(n.prefix,"");return t=t.replace(n.suffix,""),t=t.replace(new RegExp(i.escapeRegex(n.groupSeparator),"g"),""),n.unmaskAsNumber?(t=t.replace(i.escapeRegex.call(this,n.radixPoint),"."),Number(t)):t},isComplete:function(e,r){var n=e.join(""),t=e.slice();if(r.postFormat(t,0,!0,r),t.join("")!==n)return!1;var a=n.replace(r.prefix,"");return a=a.replace(r.suffix,""),a=a.replace(new RegExp(i.escapeRegex(r.groupSeparator),"g"),""),","===r.radixPoint&&(a=a.replace(i.escapeRegex(r.radixPoint),".")),isFinite(a)},onBeforeMask:function(e,r){if(""!==r.radixPoint&&isFinite(e))e=e.toString().replace(".",r.radixPoint);else{var n=e.match(/,/g),t=e.match(/\./g);t&&n?t.length>n.length?(e=e.replace(/\./g,""),e=e.replace(",",r.radixPoint)):n.length>t.length?(e=e.replace(/,/g,""),e=e.replace(".",r.radixPoint)):e=e.indexOf(".")<e.indexOf(",")?e.replace(/\./g,""):e=e.replace(/,/g,""):e=e.replace(new RegExp(i.escapeRegex(r.groupSeparator),"g"),"")}if(0===r.digits&&(-1!==e.indexOf(".")?e=e.substring(0,e.indexOf(".")):-1!==e.indexOf(",")&&(e=e.substring(0,e.indexOf(",")))),""!==r.radixPoint&&isFinite(r.digits)&&-1!==e.indexOf(r.radixPoint)){var a=e.split(r.radixPoint)[1].match(new RegExp("\\d*"))[0];if(parseInt(r.digits)<a.toString().length){var o=Math.pow(10,parseInt(r.digits));e=e.replace(i.escapeRegex(r.radixPoint),"."),e=(e=Math.round(parseFloat(e)*o)/o).toString().replace(".",r.radixPoint)}}return e.toString()},onBeforePaste:function(e,i){return i.onBeforeMask(e,i)},canClearPosition:function(r,n,t,a,o){var l=r.validPositions[n].input,s=l!==o.radixPoint||null!==r.validPositions[n].match.fn&&!1===o.decimalProtect||isFinite(l)||n===t||l===o.groupSeparator||l===o.negationSymbol.front||l===o.negationSymbol.back;if(s&&isFinite(l)){var p,f=e.inArray(o.radixPoint,r.buffer),g=!1;if(void 0===r.validPositions[f]&&(r.validPositions[f]={input:o.radixPoint},g=!0),!a&&r.buffer){var u=n+1;if(null==(p=r.buffer.join("").substr(0,n).match(o.regex.integerNPart(o)))||0===parseInt(p[0].replace(new RegExp(i.escapeRegex(o.groupSeparator),"g"),"")))for(;r.validPositions[u]&&(r.validPositions[u].input===o.groupSeparator||"0"===r.validPositions[u].input);)delete r.validPositions[u],u++}var d=[];for(var c in r.validPositions)void 0!==r.validPositions[c].input&&d.push(r.validPositions[c].input);if(g&&delete r.validPositions[f],f>0){var x=d.join("");if((p=x.match(o.regex.integerNPart(o)))&&f>=n)if(0===p[0].indexOf("0"))s=p.index!==n||"0"===o.placeholder;else{var m=parseInt(p[0].replace(new RegExp(i.escapeRegex(o.groupSeparator),"g"),"")),h=parseInt(x.split(o.radixPoint)[1]);10>m&&r.validPositions[n]&&("0"!==o.placeholder||h>0)&&(r.validPositions[n].input="0",r.p=o.prefix.length+1,s=!1)}}}return s},onKeyDown:function(r,n,t,a){var o=e(this);if(r.ctrlKey)switch(r.keyCode){case i.keyCode.UP:o.val(parseFloat(this.inputmask.unmaskedvalue())+parseInt(a.step)),o.triggerHandler("setvalue.inputmask");break;case i.keyCode.DOWN:o.val(parseFloat(this.inputmask.unmaskedvalue())-parseInt(a.step)),o.triggerHandler("setvalue.inputmask")}}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:0,radixPoint:""},percentage:{alias:"numeric",digits:2,radixPoint:".",placeholder:"0",autoGroup:!1,min:0,max:100,suffix:" %",allowPlus:!1,allowMinus:!1}}),i});